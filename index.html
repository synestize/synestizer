<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <title>synestizer</title>

    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>

    <!-- foundation -->
    <link rel="stylesheet" href="bower_components/foundation/css/foundation.css">
    <!-- synestizer style -->
    <link rel="stylesheet" href="css/style.css">
    <!-- modernizr for html5 feature detection -->

    <script src="bower_components/foundation/js/vendor/jquery.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>

    <!-- web components -->
    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
    <script src="bower_components/polymer/polymer.min.js"></script>

    <!-- include backbone.js -->
    <script src="bower_components/underscore/underscore-min.js"></script>
    <script src="bower_components/backbone/backbone.js"></script>

    <!-- include WAAX -->
    <script src="js/vendor/waax.js"></script>    
    <script>
        // init foundation
        $(document).foundation({
            accordion: {
                // specify the class used for accordion panels
                content_class: 'content',
                // specify the class used for active (or open) accordion panels
                active_class: 'active',
                // allow multiple accordion panels to be active at the same time
                multi_expand: true,
                // allow accordion panels to be closed by clicking on their headers
                // setting to false only closes accordion panels when another is opened
                toggleable: true
            }
        });
        // sticky footer
        $(window).bind("load", function () {
            var footer = $("#footer");
            var pos = footer.position();
            var height = $(window).height();
            height = height - pos.top;
            height = height - footer.height();
            if (height > 0) {
                footer.animate({
                    'margin-top': height + 'px'
                });
            }
        });
    </script>

</head>

<body>

    <div id="wrapper">
        <section id="app">
            <canvas id="canvas"></canvas>

            <video id="video" muted autoplay></video>

            <h1 id="logo">SYNESTIZER BETA</h1>

            <div class="row full">

                <div id="info" class="large-12 large-centered columns hide text-center">
                    <h1 class="info-title">
                        Welcome to Synestizer.
                    </h1>

                    <p class="info-text">
                        Please enable your webcam in the browser and activate your loudspeakers.
                    </p>
                </div>


                <div id="controls" class="hide">

                    <div class="large-centered large-12 columns">
                        <div id="patch">
                            <script id="patch_template" type="text/template">
                                <!--<div>Patch: <%= uuid %></div>-->
                            </script>
                        </div>
                    </div>
                    <div class="sidebar large-3 small-3 medium-3 columns left">
                        <dl class="accordion" data-accordion>
                            <dd class="accordion-navigation">
                                <a href="#rgb-panel">RGB</a>

                                <div id="rgb-panel" class="content active">
                                    <button onclick="document.getElementById('wrapper').webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);">fullscreen</button>
                                    <div id="average-bars"></div>
                                </div>
                            </dd>
                            <dd class="accordion-navigation">
                                <a href="#dominant-panel">Dominant Color</a>

                                <div id="dominant-panel" class="content active">
                                    <div id="dominant-bars"></div>
                                </div>
                            </dd>
                        </dl>
                    </div>


                    <div class="sidebar large-3 medium-3 small-5 columns right">
                        <!-- SYNTHS -->
                        <dl class="accordion scrollable_accordion" data-accordion>
                            <dd class="accordion-navigation">

                                <a href="#triad">Triad</a>

                                <div id="triad" class="content active">

                                    <script id="triad_template" type="text/template">

                                        <div class="row">
                                            <div class="small-3 medium-3 large-3 columns">
                                                <div class="knob_label">
                                                    Output
                                                </div>
                                                <webaudio-knob id="triadOutputKnob" src="img/knob.png"
                                                sprites="100" tooltip="Output" value="<%= preset.output  %>"
                                                min="0" max="1" step="0.01"></webaudio-knob>
                                            </div>
                                        </div>

                                        <div class="row text-center">
                                            <div class="large-4 small-4 medium-4 columns">
                                                <div class="knob_label">
                                                    Freq 1
                                                </div>
                                                <webaudio-knob id="triadFreq1Knob" src="img/knob.png"
                                                sprites="100" valuetip="0" value="<%= preset.oscFreq1 %>"
                                                min="<%= synth.oscFreq1Min %>" max="<%= synth.oscFreq1Max %>"
                                                step="1"></webaudio-knob>
                                                <input id="triadFreq1Numberbox" type="number" value="<%= preset.oscFreq1 %>" min="<%= synth.oscFreq1Min %>" max="<%= synth.oscFreq1Max %>" />
                                            </div>
                                            <div class="large-4 small-4 medium-4 columns">
                                                <div class="knob_label">
                                                    Freq 2
                                                </div>
                                                <webaudio-knob id="triadFreq2Knob" src="img/knob.png"
                                                sprites="100" valuetip="0" value="<%= preset.oscFreq2 %>"
                                                min="<%= synth.oscFreq2Min %>" max="<%= synth.oscFreq2Max %>"
                                                step="1"></webaudio-knob>
                                                <input id="triadFreq2Numberbox" type="number" value="<%= preset.oscFreq2 %>" min="<%= synth.oscFreq2Min %>" max="<%= synth.oscFreq2Max %>" />
                                            </div>
                                            <div class="large-4 small-4 medium-4 columns">
                                                <div class="knob_label">
                                                    Freq 3
                                                </div>
                                                <webaudio-knob id="triadFreq3Knob" src="img/knob.png"
                                                sprites="100" valuetip="0" value="<%= preset.oscFreq3 %>"
                                                min="<%= synth.oscFreq3Min %>" max="<%= synth.oscFreq3Max %>"
                                                step="1"></webaudio-knob>
                                                <input id="triadFreq3Numberbox" type="number" value="<%= preset.oscFreq3 %>" min="<%= synth.oscFreq3Min %>" max="<%= synth.oscFreq3Max %>" />
                                            </div>



                                        </div>

                                        <div class="row text-center">
                                            <div class="small-4 medium-4 columns">
                                                <ul class="button-group" style="padding-top: 10px; padding-bottom: 10px;">
                                                    <li><a href="#" class="button tiny">1</a></li>
                                                    <li><a href="#" class="button tiny">2</a></li>
                                                    <li><a href="#" class="button tiny">3</a></li>
                                                </ul>
                                            </div>
                                            <div class="small-4 medium-4 columns">
                                                <ul class="button-group" style="padding-top: 10px; padding-bottom: 10px;">
                                                    <li><a href="#" class="button tiny">1</a></li>
                                                    <li><a href="#" class="button tiny">2</a></li>
                                                    <li><a href="#" class="button tiny">3</a></li>
                                                </ul>
                                            </div>
                                            <div class="small-4 medium-4 columns">
                                                <ul class="button-group" style="padding-top: 10px; padding-bottom: 10px;">
                                                    <li><a href="#" class="button tiny">1</a></li>
                                                    <li><a href="#" class="button tiny">2</a></li>
                                                    <li><a href="#" class="button tiny">3</a></li>
                                                </ul>
                                            </div>
                                        </div>

                                    </script>
                                </div>

                            </dd>

                            <dd class="accordion-navigation">
                                <a href="#minimal">Minimal</a>

                                <div id="minimal" class="content active">

                                    <script id="minimal_template" type="text/template">


                                        <div class="row knob">
                                            <div class="small-3 medium-3 large-3 columns">
                                                <div class="knob_label">
                                                    Output
                                                </div>
                                                <webaudio-knob id="minimalOutputKnob" src="img/knob.png"
                                                sprites="100" tooltip="Output" value="<%= preset.output  %>"
                                                min="0" max="1" step="0.01"></webaudio-knob>
                                            </div>
                                        </div>
                                        <div class="row knob">
                                            <div class="small-3 medium-3 large-3 columns">
                                                <div class="knob_label">
                                                    Tempo
                                                </div>
                                                <webaudio-knob id="minimalTempoKnob" src="img/knob.png"
                                                sprites="100" tooltip="Tempo" value="<%= preset.tempo  %>"
                                                min="20" max="1000" step="1"></webaudio-knob>
                                            </div>
                                        </div>

                                    </script>
                                </div>

                            </dd>

                            <dd class="accordion-navigation">

                                <a href="#sampler">Sampler</a>

                                <div id="sampler" class="content active">

                                    <!--<script id="sampler_template" type="text/template">-->

                                    COMING SOON! STAY TUNED!

                                    <!--</script>-->
                                </div>


                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

        </section>
        

        <!-- Footer -->
        <div id="footer">
            <div class="footer_content">
                &copy; 2015 by <a href="http://www.kasparkoenig.com/">kaspar</a>,
                <a href="https://www.livingthing.org">dan</a> &amp;
                <a href="http://www.stahlnow.com">stahl</a>.
                This work is licensed under a <a rel="license"
                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
                Commons Attribution-ShareAlike 4.0 International License</a>.</p>
            </div>
        </div>
    </div>
    <link rel="import" href="webcomponents/controls.html">

</body>
</html>